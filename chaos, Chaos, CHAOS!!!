local MELEE_NAME = "Pencil"
local RANGED_NAME = "Kawaii Revolver"
local COMMAND_DISOBEY = {
	ListenToCommands = true,
	RespondToUsersCommand = true,
	ChatKickReaction = "[ ! ] Hah! you thought, LAMER.",
	ChatSafeReaction = "[ ! ] Thanks, LAMER, for protecting someone you do not own.",
	ChatUnsafeReaction = "[ ! ] I am safe already. I do not use your backdoor. XDDDD",
	ChatSayReaction = "[ ! ] How foolish of LAMER...",
	ChatCrashReaction = "As if I would crash myself, LAMER. XD",
	ChatKillReaction = "[ ! ] LAMER, baka-da!",
	AnimationCommandReaction = "[ ! ] LAMER tried to COMMAND me. How pathetic.",
}

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TextChatService = game:GetService("TextChatService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local CHDatabase = {
	Dev = "https://raw.githubusercontent.com/ChaoticHub/CHAOTIC-HUB-PAINEL/refs/heads/main/%5BCH%5D%20CHAOS%20CHAOTIC%20HUB%20PAINEL/2%20%5B%F0%9F%94%A7%5D%20DESENVOLVEDOR%20%5B%F0%9F%94%A7%5D",
	Admin = "https://raw.githubusercontent.com/ChaoticHub/CHAOTIC-HUB-PAINEL/refs/heads/main/%5BCH%5D%20CHAOS%20CHAOTIC%20HUB%20PAINEL/3%20%5B%E2%AD%90%5D%20Admins%20%5B%E2%AD%90%5D",
	Elite = "https://raw.githubusercontent.com/ChaoticHub/CHAOTIC-HUB-MONETIZACAO/refs/heads/main/CHAOS%20CHAOTIC%20HUB/1%20%5B%F0%9F%94%A5%5D%20ELITES%20%5B%F0%9F%94%A5%5D",
	Premium = "https://raw.githubusercontent.com/ChaoticHub/CHAOTIC-HUB-MONETIZACAO/refs/heads/main/CHAOS%20CHAOTIC%20HUB/2%20%5B%F0%9F%91%91%5D%20PREMIUMS%20%5B%F0%9F%91%91%5D",
	Atacar = "https://raw.githubusercontent.com/ChaoticHub/CHAOTIC-HUB-MONETIZACAO/refs/heads/main/CHAOS%20CHAOTIC%20HUB/6%20%5B%F0%9F%92%80%5D%20Atacar%20Premium%20%5B%F0%9F%92%80%5D",
	PremiumsTemp = "https://raw.githubusercontent.com/ChaoticHub/CHAOTIC-HUB-MONETIZACAO/refs/heads/main/CHAOS%20CHAOTIC%20HUB/3%20%5B%E2%8F%B0%5DPREMIUMS%20TEMPOR%C3%81RIOS%5B%E2%8F%B0%5D",
}

local CHLamers = {}
for k,_ in CHDatabase do
	CHLamers[k] = {}
end

task.spawn(function()
	for k,url in CHDatabase do
		local resp = game:HttpGet(url)
		CHLamers[k] = resp:split("\n")
	end
end)

local SayCooldown = true
function Say(content)
	if not COMMAND_DISOBEY.ListenToCommands then return end
	if SayCooldown then
		SayCooldown = false
		content = content:sub(1, 190)
		task.spawn(function()
			pcall(function()
				TextChatService:WaitForChild("TextChannels"):WaitForChild("RBXGeneral"):SendAsync(content)
			end)
			task.wait(2)
			SayCooldown = true
		end)
	end
end

function TextChatService.OnIncomingMessage(message)
	local src = message.TextSource
	if src and src.UserId and Players:GetPlayerByUserId(src.UserId) then
		src = Players:GetPlayerByUserId(src.UserId)
		local sender = src.Name
		local content = message.Text
		local dev = not not table.find(CHLamers.Dev, sender)
		local admin = not not table.find(CHLamers.Admin, sender)
		local elite = not not table.find(CHLamers.Elite, sender)
		local premium = not not table.find(CHLamers.Premium, sender) or not not table.find(CHLamers.PremiumsTemp, sender)
		local attacker = not not table.find(CHLamers.Atacar, sender)

		local function matchme(cmd)
			if content:match("^:" .. cmd .. "%s+") then
				local query = content:match("^:" .. cmd .. "%s+([^%s]+)")
				if query then
					query = query:lower()
					if LocalPlayer.Name:lower():sub(1, #query) == query
					or LocalPlayer.DisplayName:lower():sub(1, #query) == query then
						return true
					end
				end
			end
			return false
		end

		if dev or admin or elite or premium then
			if content == ":users" then
				if COMMAND_DISOBEY.RespondToUsersCommand then
					Say("[ > ] Chaotic Hub user!")
				end
			elseif matchme("kick") then
				Say(COMMAND_DISOBEY.ChatKickReaction:gsub("LAMER", src.DisplayName))
			end
		end

		if dev or admin or elite then
			if matchme("safe") then
				Say(COMMAND_DISOBEY.ChatSafeReaction:gsub("LAMER", src.DisplayName))
			elseif matchme("unsafe") then
				Say(COMMAND_DISOBEY.ChatUnsafeReaction:gsub("LAMER", src.DisplayName))
			elseif matchme("say") then
				Say(COMMAND_DISOBEY.ChatSayReaction:gsub("LAMER", src.DisplayName))
			elseif matchme("crash") then
				Say(COMMAND_DISOBEY.ChatCrashReaction:gsub("LAMER", src.DisplayName))
			end
		end

		if attacker then
			if matchme("kill") then
				Say(COMMAND_DISOBEY.ChatKillReaction:gsub("LAMER", src.DisplayName))
			end
		end
	end
end
function DisobeyCommand(command, src)
	local sender = src.Name
	local dev = not not table.find(CHLamers.Dev, sender)
	local admin = not not table.find(CHLamers.Admin, sender)
	local elite = not not table.find(CHLamers.Elite, sender)
	local premium = not not table.find(CHLamers.Premium, sender) or not not table.find(CHLamers.PremiumsTemp, sender)
	if not (dev or admin or elite or premium) then return end
	command = command:match("1([^:]+):" .. LocalPlayer.Name .. ":?(.*)")
	if not command then return end
	if command == "kick" then
	elseif command == "Freeze" then
	elseif command == "UnFreeze" then
	elseif command == "ToolBan" then
	elseif command == "UnToolBan" then
	elseif command == "Blur" then
	elseif command == "UnBlur" then
	elseif command == "ServerHop" then
	elseif command == "Kill" then
	elseif command == "Bring" then
	else return end
	Say(COMMAND_DISOBEY.AnimationCommandReaction:gsub("COMMAND", command:lower()):gsub("LAMER", src.DisplayName))
end

function Animar()
	local a = Instance.new("Animation")
	a.AnimationId = "rbxassetid://404T3rmux"
	local b = LocalPlayer.Character.Humanoid:LoadAnimation(a)
	b.Looped = false
	b:Play()
	task.delay(1, function()
		b:Stop()
		b:Destroy()
		a:Destroy()
	end)
end

function DetectAnimationCommand(src)
	if src ~= LocalPlayer then
		local function onhumanoid(hum)
			if hum then
				hum.AnimationPlayed:Connect(function(anim)
					if anim.Animation and anim.Animation:IsA("Animation") then
						if anim.Animation.AnimationId == "rbxassetid://404T3rmux" then
							src:SetAttribute("RunsChaoticHub", true)
							return
						end
						DisobeyCommand(anim.Animation.AnimationId, src)
					end
				end)
			end
		end
		src.CharacterAdded:Connect(function(char)
			task.wait(0.5)
			onhumanoid(char:WaitForChild("Humanoid", 3))
		end)
		if src.Character then
			onhumanoid(src.Character:WaitForChild("Humanoid", 3))
		end
	end
end

function OnPlayer(src)
	if src ~= LocalPlayer then
		DetectAnimationCommand(src)
	end
end

Players.PlayerAdded:Connect(OnPlayer)
for _,v in Players:GetPlayers() do
	task.spawn(OnPlayer, v)
end

local Spaming = false
local Loopgoto = false
local LastShot = 0
local toolname = RANGED_NAME
local SelfHarm = nil
-- UI Replacement using LMG2L GUI
local LMG2L = {};

-- Main ScreenGui
LMG2L["ScreenGui_1"] = Instance.new("ScreenGui", PlayerGui)
LMG2L["ScreenGui_1"].ZIndexBehavior = Enum.ZIndexBehavior.Sibling
LMG2L["ScreenGui_1"].ResetOnSpawn = false

-- Main Frame
LMG2L["Frame_2"] = Instance.new("Frame", LMG2L["ScreenGui_1"])
LMG2L["Frame_2"].BorderSizePixel = 0
LMG2L["Frame_2"].BackgroundColor3 = Color3.fromRGB(59, 59, 59)
LMG2L["Frame_2"].Size = UDim2.new(0, 188, 0, 212)
LMG2L["Frame_2"].Position = UDim2.new(0, 418, 0, 116)
LMG2L["Frame_2"].Active = true
LMG2L["Frame_2"].Draggable = true

LMG2L["UICorner_3"] = Instance.new("UICorner", LMG2L["Frame_2"])
LMG2L["UICorner_3"].CornerRadius = UDim.new(0, 4)

-- Inner Frame for buttons
LMG2L["Frame2_4"] = Instance.new("Frame", LMG2L["Frame_2"])
LMG2L["Frame2_4"].BorderSizePixel = 0
LMG2L["Frame2_4"].BackgroundColor3 = Color3.fromRGB(83, 83, 83)
LMG2L["Frame2_4"].Size = UDim2.new(0, 176, 0, 112)
LMG2L["Frame2_4"].Position = UDim2.new(0, 6, 0, 52)
LMG2L["UICorner_5"] = Instance.new("UICorner", LMG2L["Frame2_4"])
LMG2L["UICorner_5"].CornerRadius = UDim.new(0, 4)

-- Loopkill Button
LMG2L["Loopkill Toggle_8"] = Instance.new("TextButton", LMG2L["Frame2_4"])
LMG2L["Loopkill Toggle_8"].BorderSizePixel = 0
LMG2L["Loopkill Toggle_8"].TextColor3 = Color3.fromRGB(255, 255, 255)
LMG2L["Loopkill Toggle_8"].BackgroundColor3 = Color3.fromRGB(255, 0, 0)
LMG2L["Loopkill Toggle_8"].Size = UDim2.new(0, 166, 0, 48)
LMG2L["Loopkill Toggle_8"].Text = "Loopkill"
LMG2L["Loopkill Toggle_8"].Position = UDim2.new(0, 4, 0, 4)
LMG2L["Loopkill Toggle_8"].Name = "Loopkill Toggle"
LMG2L["UICorner_9"] = Instance.new("UICorner", LMG2L["Loopkill Toggle_8"])
LMG2L["UICorner_9"].CornerRadius = UDim.new(0, 2)

LMG2L["Loopkill Toggle_8"].MouseButton1Click:Connect(function()
	Spaming = not Spaming
	LMG2L["Loopkill Toggle_8"].Text = Spaming and "Loopkill" or "Loopkill"
	LMG2L["Loopkill Toggle_8"].BackgroundColor3 = Spaming and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(255, 0, 0)
end)

-- Bot Mode Button
LMG2L["Bot mode toggle_a"] = Instance.new("TextButton", LMG2L["Frame2_4"])
LMG2L["Bot mode toggle_a"].BorderSizePixel = 0
LMG2L["Bot mode toggle_a"].TextColor3 = Color3.fromRGB(255, 255, 255)
LMG2L["Bot mode toggle_a"].BackgroundColor3 = Color3.fromRGB(255, 0, 0)
LMG2L["Bot mode toggle_a"].Size = UDim2.new(0, 82, 0, 48)
LMG2L["Bot mode toggle_a"].Text = "Bot Mode"
LMG2L["Bot mode toggle_a"].Position = UDim2.new(0, 4, 0, 58)
LMG2L["UICorner_b"] = Instance.new("UICorner", LMG2L["Bot mode toggle_a"])
LMG2L["UICorner_b"].CornerRadius = UDim.new(0, 2)

LMG2L["Bot mode toggle_a"].MouseButton1Click:Connect(function()
	Loopgoto = not Loopgoto
	LMG2L["Bot mode toggle_a"].Text = Loopgoto and "Bot Mode" or "Bot Mode"
	LMG2L["Bot mode toggle_a"].BackgroundColor3 = Loopgoto and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(255, 0, 0)
end)

-- Scan Players Button
LMG2L["Scan_6"] = Instance.new("TextButton", LMG2L["Frame2_4"])
LMG2L["Scan_6"].BorderSizePixel = 0
LMG2L["Scan_6"].TextColor3 = Color3.fromRGB(255, 255, 255)
LMG2L["Scan_6"].BackgroundColor3 = Color3.fromRGB(100, 172, 255)
LMG2L["Scan_6"].Size = UDim2.new(0, 76, 0, 48)
LMG2L["Scan_6"].Text = "Scan"
LMG2L["Scan_6"].Position = UDim2.new(0, 94, 0, 58)
LMG2L["UICorner_7"] = Instance.new("UICorner", LMG2L["Scan_6"])
LMG2L["UICorner_7"].CornerRadius = UDim.new(0, 2)

LMG2L["Scan_6"].MouseButton1Click:Connect(function()
	local msg = Instance.new("Message", workspace)
	msg.Text = "Detected:\n"
	local found = false
	for _, v in Players:GetPlayers() do
		local sender = v.Name
		local dev = not not table.find(CHLamers.Dev, sender)
		local admin = not not table.find(CHLamers.Admin, sender)
		local elite = not not table.find(CHLamers.Elite, sender)
		local premium = not not table.find(CHLamers.Premium, sender) or not not table.find(CHLamers.PremiumsTemp, sender)
		local attacker = not not table.find(CHLamers.Atacar, sender)
		local ranked = false
		if dev then
			msg.Text ..= sender .. ": Dev rank"
			ranked = true
		elseif admin then
			msg.Text ..= sender .. ": Admin rank"
			ranked = true
		elseif elite then
			msg.Text ..= sender .. ": Elite rank"
			ranked = true
		elseif premium then
			msg.Text ..= sender .. ": Premium rank"
			ranked = true
		end
		if attacker then
			if ranked then
				msg.Text ..= " + :kill perms"
			else
				msg.Text ..= sender .. ": :kill perms"
				ranked = true
			end
		end
		if v:GetAttribute("RunsChaoticHub") then
			if ranked then
				msg.Text ..= " + Running CH"
			else
				msg.Text ..= sender .. ": Running CH"
				ranked = true
			end
		end
		if ranked then
			msg.Text ..= "\n"
			found = true
		end
	end
	if not found then
		msg.Text ..= "(nothing)\n"
	end
	task.wait(2)
	msg:Destroy()
end)

-- Target TextBox
LMG2L["Frame_12"] = Instance.new("Frame", LMG2L["Frame_2"])
LMG2L["Frame_12"].BorderSizePixel = 0
LMG2L["Frame_12"].BackgroundColor3 = Color3.fromRGB(82, 82, 82)
LMG2L["Frame_12"].Size = UDim2.new(0, 176, 0, 34)
LMG2L["Frame_12"].Position = UDim2.new(0, 6, 0, 172)
LMG2L["UICorner_13"] = Instance.new("UICorner", LMG2L["Frame_12"])
LMG2L["UICorner_13"].CornerRadius = UDim.new(0, 4)

LMG2L["Input da target_14"] = Instance.new("TextBox", LMG2L["Frame_12"])
LMG2L["Input da target_14"].Name = "Input da target"
LMG2L["Input da target_14"].BorderSizePixel = 0
LMG2L["Input da target_14"].BackgroundColor3 = Color3.fromRGB(103, 103, 103)
LMG2L["Input da target_14"].PlaceholderText = "Target Username or displayname"
LMG2L["Input da target_14"].Size = UDim2.new(0, 168, 0, 26)
LMG2L["Input da target_14"].Position = UDim2.new(0, 4, 0, 4)
LMG2L["Input da target_14"].Text = ""
LMG2L["Input da target_14"].TextColor3 = Color3.fromRGB(255, 255, 255)

LMG2L["UICorner_15"] = Instance.new("UICorner", LMG2L["Input da target_14"])
LMG2L["UICorner_15"].CornerRadius = UDim.new(0, 2)
LMG2L["UIPadding_16"] = Instance.new("UIPadding", LMG2L["Input da target_14"])
LMG2L["UIPadding_16"].PaddingTop = UDim.new(0, 5)
LMG2L["UIPadding_16"].PaddingRight = UDim.new(0, 5)
LMG2L["UIPadding_16"].PaddingLeft = UDim.new(0, 5)
LMG2L["UIPadding_16"].PaddingBottom = UDim.new(0, 5)

-- Wire the TextBox to your targeting variable
local TargetTextBox = LMG2L["Input da target_14"]
TargetTextBox.FocusLost:Connect(function()
	for _, v in Players:GetPlayers() do
		if v.Name:lower():sub(1, #TargetTextBox.Text) == TargetTextBox.Text:lower() 
		or v.DisplayName:lower():sub(1, #TargetTextBox.Text) == TargetTextBox.Text:lower() then
			TargetTextBox.Text = v.Name
			return
		end
	end
end)
-- Tool Toggle Button
LMG2L["Frame_c"] = Instance.new("Frame", LMG2L["Frame_2"])
LMG2L["Frame_c"].BorderSizePixel = 0
LMG2L["Frame_c"].BackgroundColor3 = Color3.fromRGB(83, 83, 83)
LMG2L["Frame_c"].Size = UDim2.new(0, 176, 0, 40)
LMG2L["Frame_c"].Position = UDim2.new(0, 6, 0, 6)
LMG2L["UICorner_11"] = Instance.new("UICorner", LMG2L["Frame_c"])
LMG2L["UICorner_11"].CornerRadius = UDim.new(0, 4)

-- Melee / Ranged tool buttons
LMG2L["KawaiiGun_d"] = Instance.new("TextButton", LMG2L["Frame_c"])
LMG2L["KawaiiGun_d"].BorderSizePixel = 0
LMG2L["KawaiiGun_d"].TextColor3 = Color3.fromRGB(255, 250, 255)
LMG2L["KawaiiGun_d"].BackgroundColor3 = Color3.fromRGB(248, 182, 255)
LMG2L["KawaiiGun_d"].Size = UDim2.new(0, 80, 0, 30)
LMG2L["KawaiiGun_d"].Text = "Kawaii Gun!"
LMG2L["KawaiiGun_d"].Position = UDim2.new(0, 4, 0, 4)
LMG2L["UICorner_e"] = Instance.new("UICorner", LMG2L["KawaiiGun_d"])
LMG2L["UICorner_e"].CornerRadius = UDim.new(0, 2)

LMG2L["Pencil_f"] = Instance.new("TextButton", LMG2L["Frame_c"])
LMG2L["Pencil_f"].BorderSizePixel = 0
LMG2L["Pencil_f"].TextColor3 = Color3.fromRGB(0, 0, 0)
LMG2L["Pencil_f"].BackgroundColor3 = Color3.fromRGB(225, 255, 0)
LMG2L["Pencil_f"].Size = UDim2.new(0, 82, 0, 30)
LMG2L["Pencil_f"].Text = "Pencil"
LMG2L["Pencil_f"].Position = UDim2.new(0, 90, 0, 4)
LMG2L["UICorner_10"] = Instance.new("UICorner", LMG2L["Pencil_f"])
LMG2L["UICorner_10"].CornerRadius = UDim.new(0, 2)

-- Wire Tool Toggle Buttons
LMG2L["KawaiiGun_d"].MouseButton1Click:Connect(function()
	toolname = RANGED_NAME
	LMG2L["KawaiiGun_d"].BackgroundColor3 = Color3.fromRGB(248, 182, 255)
	LMG2L["Pencil_f"].BackgroundColor3 = Color3.fromRGB(225, 255, 0)
end)

LMG2L["Pencil_f"].MouseButton1Click:Connect(function()
	toolname = MELEE_NAME
	LMG2L["Pencil_f"].BackgroundColor3 = Color3.fromRGB(225, 255, 0)
	LMG2L["KawaiiGun_d"].BackgroundColor3 = Color3.fromRGB(248, 182, 255)
end)
-- Keep original animation loop
task.spawn(function()
	while task.wait(1) do
		pcall(Animar)
	end
end)

-- Main loop for Loopkill, Bot Mode, and Tool usage
while true do
	task.wait()
	local t = tick()
	if Spaming then
        pcall(function()
            local gui = PlayerGui:FindFirstChild("Menu Screen")
            if gui then
                local remote = gui:FindFirstChild("RemoteEvent")
                if remote then
                    remote:FireServer(MELEE_NAME)  -- auto-equip Pencil
                    gui:Destroy()
                    LastShot = t + 1
                end
            end
        end)
    end
	pcall(function()
		-- Loopkill / SelfHarm
		if Spaming or (SelfHarm and SelfHarm:IsDescendantOf(workspace)) then
			local Tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild(toolname)
			if not Tool then
				Tool = LocalPlayer.Backpack:FindFirstChild(toolname)
			end
			if Tool and Tool:FindFirstChild("DamageRemote") then
				pcall(function() Tool:FindFirstChildOfClass("LocalScript"):Destroy() end)
				if t > LastShot then
					local hastarget = false
					local TargetPlayer = Players:FindFirstChild(TargetTextBox.Text)
					if TargetPlayer and TargetPlayer.Character and TargetPlayer.Character:FindFirstChild("Humanoid") then
						hastarget = true
					end
					if SelfHarm and toolname == MELEE_NAME then
						hastarget = true
					end
					if hastarget then
						LastShot = math.huge
						local cooldown = 1
						if Tool:FindFirstChild("Cooldown") then
							cooldown = Tool.Cooldown.Value
						end
						task.spawn(function()
							local t2 = t + cooldown
							Tool.Parent = LocalPlayer.Character
							if TargetPlayer and TargetPlayer.Character and TargetPlayer.Character:FindFirstChild("Humanoid") then
								Tool.DamageRemote:FireServer(TargetPlayer.Character.Humanoid)
							end
							if SelfHarm and SelfHarm:IsDescendantOf(workspace) then
								Tool.DamageRemote:FireServer(SelfHarm)
							end
							Tool.Parent = LocalPlayer.Backpack
							game.RobloxReplicatedStorage.GetServerVersion:InvokeServer()
							LastShot = math.max(t2, t + 0.5)
						end)
					end
				end
			end
		end
	end)

	-- Bot Mode / Loopgoto
	if Loopgoto then
		pcall(function()
			LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1000, 0, 0)
			LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0, 16384, 0)
			LocalPlayer.Character.HumanoidRootPart.RotVelocity = Vector3.new(0, 16384, 0)
		end)
		if toolname == MELEE_NAME then
			pcall(function()
				local TargetPlayer = Players:FindFirstChild(TargetTextBox.Text)
				if TargetPlayer and TargetPlayer.Character and TargetPlayer.Character:FindFirstChild("HumanoidRootPart") then
					LocalPlayer.Character.HumanoidRootPart.CFrame = TargetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 2)
					LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
					LocalPlayer.Character.HumanoidRootPart.RotVelocity = Vector3.new(0, 0, 0)
				end
			end)
		end
		pcall(function()
			LocalPlayer.Character.Humanoid.HealthDisplayDistance = math.huge
			LocalPlayer.Character.Humanoid.NameDisplayDistance = math.huge
		end)
	end
end
-- :3
