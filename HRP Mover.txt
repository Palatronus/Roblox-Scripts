-- Revised Teleport Script with Robust Methods
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local TARGET_POSITION = Vector3.new(100, 50, 200) -- Your coordinates
local ACTIVATION_KEY = Enum.KeyCode.G -- Your chosen key

local function teleportCharacter()
    -- Wait for and validate the character
    local character = LocalPlayer.Character
    if not character then
        warn("Character not found.")
        return
    end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoid or not humanoidRootPart then
        warn("Character components not ready.")
        return
    end

    -- METHOD 1: Use PivotTo (Recommended)
    local targetCFrame = CFrame.new(TARGET_POSITION)
    local success, errorMessage = pcall(function()
        character:PivotTo(targetCFrame)
    end)
    
    if success then
        print("Teleport successful using PivotTo.")
        return
    else
        warn("PivotTo failed: " .. errorMessage)
    end

    -- METHOD 2: Use MoveTo (Fallback)
    local success, errorMessage = pcall(function()
        character:MoveTo(TARGET_POSITION)
    end)
    
    if success then
        print("Teleport successful using MoveTo.")
        return
    else
        warn("MoveTo failed: " .. errorMessage)
    end

    -- METHOD 3: Corrected CFrame approach (Last Resort)
    local success, errorMessage = pcall(function()
        -- This preserves the rotation to avoid assembly issues:cite[4]
        humanoidRootPart.CFrame = CFrame.new(TARGET_POSITION) * humanoidRootPart.CFrame.Rotation
    end)
    
    if success then
        print("Teleport successful using CFrame.")
    else
        warn("All teleport methods failed: " .. errorMessage)
    end
end

-- Key connection
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == ACTIVATION_KEY then
        teleportCharacter()
    end
end)

print("Teleport script loaded. Press the configured key to activate.")
