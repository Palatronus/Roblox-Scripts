-- Direct Network Control HRP Separation
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local TARGET_POSITION = Vector3.new(100, 500, 200)
local active = false

local function takeNetworkOwnership()
    local character = LocalPlayer.Character
    if not character then return false end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    -- Force network ownership to client
    pcall(function()
        hrp:SetNetworkOwner(nil) -- Try to make client authoritative
    end)
    
    return true
end

local function controlHRP()
    if not takeNetworkOwnership() then return end
    
    local character = LocalPlayer.Character
    local hrp = character:FindFirstChild("HumanoidRootPart")
    
    active = true
    
    -- Aggressive position control
    while active and hrp and hrp.Parent do
        -- Break velocity constraints
        hrp.Velocity = Vector3.new(0, 0, 0)
        hrp.RotVelocity = Vector3.new(0, 0, 0)
        
        -- Force position
        hrp.CFrame = CFrame.new(TARGET_POSITION)
        
        -- Apply anti-correction measures
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") and part ~= hrp then
                part.Velocity = Vector3.new(0, 0, 0)
            end
        end
        
        RunService.Heartbeat:Wait()
    end
end

-- Toggle with F key
game:GetService("UserInputService").InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == Enum.KeyCode.F then
        active = not active
        if active then
            controlHRP()
        end
    end
end)

print("Network Control HRP Separation Loaded - Press F")
