-- Fixed Fling System
local Flinging = false
local function FlingTarget(target)
    while Flinging and wait(0.02) do
        if target.Character and LP.Character then
            local tHRP = target.Character:FindFirstChild("HumanoidRootPart")
            local myHRP = LP.Character:FindFirstChild("HumanoidRootPart")
            
            if tHRP and myHRP then
                -- Improved prediction pattern
                local offsets = {
                    Vector3.new(5, 3, 5),
                    Vector3.new(-5, 3, -5),
                    Vector3.new(5, 3, -5),
                    Vector3.new(-5, 3, 5)
                }
                
                -- Force network control
                if tHRP:GetNetworkOwner() ~= LP then
                    tHRP:SetNetworkOwner(LP)
                end
                
                for _, offset in ipairs(offsets) do
                    if not Flinging then break end
                    
                    -- Position and velocity adjustments
                    myHRP.CFrame = tHRP.CFrame + offset
                    myHRP.Velocity = (tHRP.Position - myHRP.Position).Unit * 6000 + Vector3.new(0, 3500, 0)
                    
                    -- Collision control
                    myHRP.CanCollide = false
                    tHRP.CanCollide = false
                    
                    wait(0.03)
                end
            end
        end
    end
end
