--// Auto Heal & Auto Armor Script for Sword Fight on the Heights Original
--// Designed for Execution in Roblox Executors, Uses firetouchinterest()

-- Variables
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")
local workspace = game:GetService("Workspace")

local function getObjects(name)
    local objects = {}
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj.Name == name and obj:IsA("BasePart") then
            table.insert(objects, obj)
        end
    end
    return objects
end

local function fireTouch(target)
    if target and rootPart then
        firetouchinterest(rootPart, target, 0) -- Start Touch
        task.wait(0.1) -- Small Delay
        firetouchinterest(rootPart, target, 1) -- End Touch
    end
end

local function hasArmor()
    return humanoid.MaxHealth > 100 -- Assumes armor doubles health
end

local function needsHealing()
    return humanoid.Health < humanoid.MaxHealth
end

local function equipArmor()
    for _, stand in ipairs(getObjects("BattleArmorStand")) do
        if stand and not hasArmor() then
            fireTouch(stand)
            task.wait(0.5) -- Avoid spam
            if hasArmor() then return end -- Stop if armor is equipped
        end
    end
end

local function triggerHeal()
    for _, pad in ipairs(getObjects("HealPad")) do
        if pad and needsHealing() then
            fireTouch(pad)
            task.wait(0.5)
        end
    end
end

local function mainLoop()
    while task.wait(1) do -- Performance-friendly delay
        if character and humanoid and rootPart then
            equipArmor()
            triggerHeal()
        end
    end
end

-- Ensure it runs even after respawn
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    task.wait(1)
    mainLoop()
end)

task.spawn(mainLoop)
